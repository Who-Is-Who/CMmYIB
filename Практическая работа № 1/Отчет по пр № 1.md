# Отчет по практической работе № 1
## Выполнил: Студент группы ББМО-01-23 Панков Никита Олегович

### Цель работы:
  - Установить docker, docker-compose.
  - Установить образы с IDS Snort и DB Barnyard 2
  - По желанию можно установить Snorby для работы через web-интерфейс.
  - Запустить полученные образы в контейнерах
  - Создать произвольное правило для Snort.
  - Запустить в Snort  сниффер пакетов с выводом статистики в консоль или web-интерфейс.
  - Запустить Snort  в режиме обнаружения вторжений.
  - Оформить выполнение задания в виде отчета со скриншотами, описанием команд и действий. .

### Ход работы

Snort - это мощная система обнаружения вторжений (IDS) и предотвращения вторжений (IPS) для компьютерных сетей. Она способна анализировать сетевой трафик в реальном времени и обнаруживать потенциальные атаки, включая известные уязвимости, аномалии и сигнатурные атаки, основываясь на наборе правил. Snort является бесплатным и с открытым исходным кодом, что делает его популярным выбором для обеспечения безопасности в сетях.  


Barnyard 2 - это инструмент, который работает вместе с Snort для управления, анализа и хранения данных, собранных системой Snort. Он помогает улучшить производительность и эффективность системы IDS/IPS, предоставляя более удобные средства управления данными и обеспечивая более подробный анализ сетевой активности.  

  1) Установить docker, docker-compose.

Для установки docker и docker-compose необходимо открыть терминаль и впсиать в него следующую команду.  

    sudo apt-get install docker-compose

![](https://i.imgur.com/mdkdlyO.png)  

Чтобы убедиться в коректности установки docker и docker-compose используем слеующие команды.  

    docker -version  
    docker-compose -version  
![](https://i.imgur.com/5OKeSA8.png)

2) Установить образы с IDS Snort и DB Barnyard 2

Для установки образа с IDS Snort и DB Barnyard 2 воспользуемся командой git которая скачает его с github к нам на устройство

    git clone https://github.com/fabriziogaliano/docker-snort-ids  

После переходим в скачанную папку  

    cd docker-snort-ids  
  
  ![](https://i.imgur.com/9TAMyXQ.png)  

3) Запустить полученные образы в контейнерах  

Прежде чем запустить образы в контейнерах необходимо было исправить ошибку в docker файле и внести необходимые нам настройки. В итоге файл выглядит следующим образом

![](https://i.imgur.com/DwiRanL.png)  

Тепепрь можно произвести запуск используя данную команду  

    sudo docker-compose up -d  

  ![](https://i.imgur.com/sb5EFqB.png)  

4) Создать произвольное правило для Snort.

Для того чтоб создать наше правило необходимо сначал перейти в сам контейнер  

    sudo docker exec -it docker-snort-ids_ids_1 bash  

где:  
  -`docker exec`: Это команда Docker для выполнения команды внутри контейнера.  
  -`it`: Эти опции указывают Docker на то, что мы хотим запустить команду в интерактивном режиме с подключением к терминалу контейнера.  
  -`docker-snort-ids_ids_1`: Это имя контейнера Docker, в котором мы хотим выполнить команду.  
  -`bash`: Это команда, которую мы хотим выполнить внутри контейнера. В данном случае, это запускает интерактивную оболочку Bash внутри контейнера.  

![](https://i.imgur.com/ZgWx0cY.png)

Дальше нам необходимо открыть файл **local.rules**  

    nano /etc/snort/rules/local.rules

![](https://i.imgur.com/mW7mFLc.png)  

Впсиываем наше правило после чего сохраняем внесенные изменения. Наше правило имеет следующий вид  

    alert icmp any any -> 8.8.8.8 any (msg:"PANKOV.N.O";sid:1000001; rev:1;)

  где:  
    -`alert`: Это действие, которое должно быть выполнено, если правило соответствует сетевому трафику. В данном случае, это действие указывает на отправку уведомления.  
    -`icmp`: Это протокол, к которому относится правило. В данном случае, это Internet Control Message Protocol, который используется для отправки сообщений об ошибках и управления сетевыми устройствами.  
    -`any`: Это сетевые адреса или порты, к которым применяется правило. В данном случае, any означает "любой" адрес или порт.  
    -`->`: Этот символ указывает на направление сетевого трафика. В данном случае, это означает, что трафик направлен от любого источника к адресу назначения.  
    -`8.8.8.8 any`: Это адрес назначения и порт, к которому применяется правило. В данном случае, пакеты отправляются на IP-адрес 8.8.8.8 (который принадлежит DNS-серверам Google) на любой порт.  
    -`msg:"PANKOV.N.O"`;: Это сообщение, которое будет включено в уведомление, если сработает правило. В данном случае, сообщение "PANKOV.N.O".  
    -`sid:1000001;`: Это уникальный идентификатор правила (Signature ID). Каждое правило имеет свой уникальный ID для идентификации его срабатывания в системе.  
    -`rev:1;`: Это версия правила (Revision). Позволяет отслеживать изменения и обновления правил.  

![](https://i.imgur.com/3FQnYM2.png)  

5) Запустить в Snort сниффер пакетов с выводом статистики в консоль или web-интерфейс.

Для запуска в Snort сниффер пакетов прибегнем к следующей команде  

    snort -dev -i etho  

где:  
    -`d`: Этот флаг включает режим разработки, который выводит дополнительную отладочную информацию на консоль.  
    -`e`: Этот флаг принудительно выводит весь трафик, включая дополнительные поля заголовков.  
    -`i eth0`: Этот аргумент указывает Snort на то, что он должен мониторить трафик на сетевом интерфейсе eth0.  

![](https://i.imgur.com/voitq3N.png)

6) Запустить Snort в режиме обнаружения вторжений.

Для запуска Snort в режиме обнаружения вторжения прибегнем к следующей команде  

    snort -c /etc/snort/snort.conf -i eth0 -A console -k none  

где:  
    -`c /etc/snort/snort.conf`: Этот аргумент указывает на расположение конфигурационного файла Snort, который используется для настройки правил обнаружения и других параметров работы Snort.  
    -`i eth0`: Этот аргумент указывает Snort на то, что он должен мониторить трафик на сетевом интерфейсе eth0.  
    -`A console`: Этот аргумент определяет, как Snort будет выводить алерты (уведомления) о событиях обнаружения. В данном случае, -A console означает, что алерты будут выводиться на консоль.  
    -`k none`: Этот аргумент отключает DNS-резолвер в Snort. Когда -k none указан, Snort не будет пытаться разрешать DNS-имена для IP-адресов, связанных с обнаруженными событиями.  

После запуска мы мождем проверить работоспособность нашего правило. Для этого откроем новое окно терминала и попробуем выполнить `ping 8.8.8.8`

![](https://i.imgur.com/2wihaqb.png)




  





  


  
